<div class="auth-container">
  <div class="auth-card" role="region" aria-labelledby="reset-title">
    <h1 id="reset-title" class="title">Reset Password</h1>
    <p class="subtitle">
      Set a new password for <strong class="muted-email">{{ email }}</strong>
    </p>

    <form (ngSubmit)="submit()" class="reset-form" novalidate>
      <div class="form-row">
        <label for="password" class="label">New password</label>
        <div class="input-with-toggle">
          <input
            id="password"
            name="password"
            [type]="showPassword ? 'text' : 'password'"
            required
            [(ngModel)]="password"
            class="form-input"
            placeholder="Enter new password"
            aria-required="true"
          />
          <button
            type="button"
            class="toggle-btn"
            (click)="showPassword = !showPassword"
            [attr.aria-pressed]="showPassword"
            aria-label="Toggle password visibility"
          >
            <svg
              *ngIf="!showPassword"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M12 5C7 5 2.73 8.11 1 12c1.73 3.89 6 7 11 7s9.27-3.11 11-7c-1.73-3.89-6-7-11-7z"
                stroke="#0f172a"
                stroke-width="1.2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <circle
                cx="12"
                cy="12"
                r="3"
                stroke="#0f172a"
                stroke-width="1.2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            <svg
              *ngIf="showPassword"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M3 3l18 18"
                stroke="#0f172a"
                stroke-width="1.2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M10.58 10.58A3 3 0 0 0 13.42 13.42"
                stroke="#0f172a"
                stroke-width="1.2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M14.12 14.12C13.14 14.79 12.06 15.14 11 15.14c-5 0-9.27-3.11-11-7 1.03-2.32 2.7-4.2 4.64-5.45"
                stroke="#0f172a"
                stroke-width="1.2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </button>
        </div>
      </div>

      <div *ngIf="message" class="message" role="alert">{{ message }}</div>

      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="loading || !password"
      >
        <span *ngIf="!loading">Save new password</span>
        <span *ngIf="loading">Saving...</span>
      </button>
    </form>

    <p class="auth-switch"><a routerLink="/login">Back to Login</a></p>
  </div>
</div>
